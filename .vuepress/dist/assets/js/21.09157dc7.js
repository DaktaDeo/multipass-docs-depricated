(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{374:function(t,a,e){"use strict";e.r(a);var s=e(44),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"formatting-examples"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#formatting-examples"}},[t._v("#")]),t._v(" Formatting Examples")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Did you know?")]),t._v(" "),e("p",[t._v("Laravel now offers Horizon, a beautiful dashboard and configuration system for your Redis powered queues. Check out the full "),e("a",{attrs:{href:"/docs/%7B%7Bversion%7D%7D/horizon"}},[t._v("Horizon documentation")]),t._v(" for more information.")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Something to keep in mind")]),t._v(" "),e("p",[t._v("Laravel now offers Horizon, a beautiful dashboard and configuration system for your Redis powered queues. Check out the full "),e("a",{attrs:{href:"/docs/%7B%7Bversion%7D%7D/horizon"}},[t._v("Horizon documentation")]),t._v(" for more information.")])]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("Be Careful!")]),t._v(" "),e("p",[t._v("Laravel now offers Horizon, a beautiful dashboard and configuration system for your Redis powered queues. Check out the full "),e("a",{attrs:{href:"/docs/%7B%7Bversion%7D%7D/horizon"}},[t._v("Horizon documentation")]),t._v(" for more information.")])]),t._v(" "),e("p",[t._v("Laravel queues provide a unified API across a variety of different queue backends, such as Beanstalk, Amazon SQS, Redis, or even a relational database. Queues allow you to defer the processing of a time consuming task, such as sending an email, until a later time. Deferring these time consuming tasks drastically speeds up web requests to your application.")]),t._v(" "),e("p",[t._v("The queue configuration file is stored in "),e("code",[t._v("config/queue.php")]),t._v(". In this file you will find connection configurations for each of the queue drivers that are included with the framework, which includes a database, "),e("a",{attrs:{href:"https://kr.github.io/beanstalkd/",target:"_self",rel:"false"}},[t._v("Beanstalkd")]),t._v(", "),e("a",{attrs:{href:"https://aws.amazon.com/sqs/",target:"_self",rel:"false"}},[t._v("Amazon SQS")]),t._v(", "),e("a",{attrs:{href:"https://redis.io",target:"_self",rel:"false"}},[t._v("Redis")]),t._v(", and a synchronous driver that will execute jobs immediately (for local use). A "),e("code",[t._v("null")]),t._v(" queue driver is also included which discards queued jobs.")]),t._v(" "),e("h3",{attrs:{id:"sub-sub-section"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sub-sub-section"}},[t._v("#")]),t._v(" Sub Sub Section")]),t._v(" "),e("p",[t._v('Before getting started with Laravel queues, it is important to understand the distinction between "connections" and "queues". In your '),e("code",[t._v("config/queue.php")]),t._v(" configuration file, there is a "),e("code",[t._v("connections")]),t._v(' configuration option. This option defines a particular connection to a backend service such as Amazon SQS, Beanstalk, or Redis. However, any given queue connection may have multiple "queues" which may be thought of as different stacks or piles of queued jobs.')]),t._v(" "),e("p",[t._v("Note that each connection configuration example in the "),e("code",[t._v("queue")]),t._v(" configuration file contains a "),e("code",[t._v("queue")]),t._v(" attribute. This is the default queue that jobs will be dispatched to when they are sent to a given connection. In other words, if you dispatch a job without explicitly defining which queue it should be dispatched to, the job will be placed on the queue that is defined in the "),e("code",[t._v("queue")]),t._v(" attribute of the connection configuration:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This job is sent to the default queue...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Job")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// This job is sent to the "emails" queue...')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Job")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onQueue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'emails'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"_4th-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4th-level"}},[t._v("#")]),t._v(" 4th Level")]),t._v(" "),e("p",[t._v("In order to use the "),e("code",[t._v("database")]),t._v(" queue driver, you will need a database table to hold the jobs. To generate a migration that creates this table, run the "),e("code",[t._v("queue:table")]),t._v(" Artisan command. Once the migration has been created, you may migrate your database using the "),e("code",[t._v("migrate")]),t._v(" command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("php artisan queue:table\n\nphp artisan migrate\n")])])]),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Providers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Support"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Facades"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Queue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Support"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ServiceProvider")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Queue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Events"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("JobProcessed")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Queue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Events"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("JobProcessing")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("AppServiceProvider")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServiceProvider")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Bootstrap any application services.\n     *\n     * @return void\n     */")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("boot")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Queue")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("before")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("JobProcessing")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $event->connectionName")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $event->job")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $event->job->payload()")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Queue")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("after")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("JobProcessed")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $event->connectionName")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $event->job")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $event->job->payload()")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Register the service provider.\n     *\n     * @return void\n     */")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("register")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);